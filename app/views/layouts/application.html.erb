<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "BurnRate" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= action_cable_meta_tag %>
    <%= yield :head %>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <link rel="icon" href="/icon.png" type="image/png">
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <script type="module">
      import { Turbo } from "https://esm.sh/@hotwired/turbo-rails@8.0.0"
      
      document.addEventListener("turbo:load", () => {
        console.log("üöÄ Turbo Loaded")
      })
      
      document.addEventListener("turbo:before-stream-render", (event) => {
        console.log("‚ö°Ô∏è Stream Received:", event.detail.newStream)
      })
    </script>

    <style>
      * { box-sizing: border-box; margin: 0; padding: 0; }
      
      body {
        font-family: 'Inter', -apple-system, system-ui, sans-serif;
        background: #111113;
        color: #e4e4e7;
        line-height: 1.5;
      }
      
      .font-mono { font-family: 'JetBrains Mono', monospace; }
      
      /* Layout */
      .app-layout {
        display: flex;
        min-height: 100vh;
      }
      
      /* Sidebar */
      .sidebar {
        width: 240px;
        background: #18181b;
        border-right: 1px solid #27272a;
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
      }
      
      .sidebar-header {
        height: 60px;
        padding: 0 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        border-bottom: 1px solid #27272a;
      }
      
      .sidebar-logo {
        width: 32px;
        height: 32px;
        background: linear-gradient(135deg, #34d399, #22d3ee);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .sidebar-nav {
        flex: 1;
        padding: 16px 12px;
      }
      
      .nav-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 12px;
        border-radius: 8px;
        color: #a1a1aa;
        text-decoration: none;
        font-size: 14px;
        margin-bottom: 4px;
        transition: all 0.15s;
      }
      
      .nav-item:hover { background: #27272a; color: #fff; }
      .nav-item.active { background: #27272a; color: #fff; }
      
      .sidebar-footer {
        padding: 16px;
        border-top: 1px solid #27272a;
      }
      
      .user-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      
      .user-avatar {
        width: 32px;
        height: 32px;
        background: #3f3f46;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 500;
      }
      
      /* Main Area */
      .main-area {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0;
      }
      
      .main-header {
        height: 60px;
        padding: 0 32px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid #27272a;
        background: #18181b;
      }
      
      .header-left h1 {
        font-size: 16px;
        font-weight: 600;
        color: #fff;
      }
      
      .header-right {
        display: flex;
        align-items: center;
        gap: 20px;
      }
      
      .status-badge {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 11px;
        color: #71717a;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
      
      .status-dot {
        width: 8px;
        height: 8px;
        background: #22c55e;
        border-radius: 50%;
        animation: pulse 2s infinite;
      }
      
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }
      
      .btn-primary {
        padding: 8px 16px;
        background: #fff;
        color: #18181b;
        border: none;
        border-radius: 8px;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.15s;
      }
      
      .btn-primary:hover { background: #e4e4e7; }
      
      .main-content {
        flex: 1;
        padding: 32px;
        overflow-y: auto;
      }
    </style>
  </head>

  <body>
    <div class="app-layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" fill="#18181b">
              <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd" />
            </svg>
          </div>
          <span style="font-weight: 600; color: #fff;">BurnRate</span>
        </div>
        
        <nav class="sidebar-nav">
          <a href="#" class="nav-item active">
            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>
            Dashboard
          </a>
          <a href="#" class="nav-item">
            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>
            Products
          </a>
          <a href="#" class="nav-item">
            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
            Analytics
          </a>
          <a href="#" class="nav-item">
            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
            Settings
          </a>
        </nav>
        
        <div class="sidebar-footer">
          <div class="user-info">
            <div class="user-avatar">BR</div>
            <div>
              <div style="font-size: 13px; font-weight: 500; color: #fff;">BurnRate Inc.</div>
              <div style="font-size: 11px; color: #71717a;">Free Plan</div>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main -->
      <div class="main-area">
        <header class="main-header">
          <div class="header-left">
            <h1>Inventory Runway</h1>
          </div>
          <div class="header-right">
            <div class="status-badge">
              <div class="status-dot"></div>
              <span class="font-mono">Oracle Live</span>
            </div>
            <button class="btn-primary">+ Add Product</button>
          </div>
        </header>
        
        <main class="main-content">
          <%= yield %>
        </main>
      </div>
    </div>
  </body>
</html>
